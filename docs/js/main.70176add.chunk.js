(this.webpackJsonppoll=this.webpackJsonppoll||[]).push([[0],{128:function(e,t,n){e.exports=n(192)},133:function(e,t,n){},192:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(8),s=n.n(o),l=(n(133),n(36)),r=n(66),c=n(67),u=n(56),m=n(75),d=n(78),p=n(9),h=n.n(p),E=n(194),f=n(197),v=n(193),y=n(35),C=n(195),b=n(112),N=n(196),O=n(198),g=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var a;if(Object(r.a)(this,n),(a=t.call(this,e)).onNameChange=function(e){var t=e.target.value;a.setState({questionName:t})},a.onAddOption=function(){a.setState({options:[].concat(Object(l.a)(a.state.options),[{name:""}])})},a.onTypeChange=function(e){a.setState({type:e.target.value})},a.onOptionChange=function(e,t){var n=t.target.value,i=Object(l.a)(a.state.options);i[e].name=n,a.setState({options:i})},a.onOptionDeletion=function(e){var t=Object(l.a)(a.state.options);t.splice(e,1),a.setState({options:t})},a.onConfirm=function(){var e={name:a.state.questionName,options:a.state.options,type:a.state.type};a.props.onConfirm(e)},a.checkState=function(){var e,t=!!a.state.questionName.trim(),n=!1,i=!1,o=Object(b.a)(a.state.options);try{for(o.s();!(e=o.n()).done;){var s=e.value;n=!0,""===s.name.trim()&&(i=!0)}}catch(l){o.e(l)}finally{o.f()}return t&&n&&!i},e.editIndex>=0){var i=e.questions[e.editIndex];a.state={questionName:i.name,type:i.type,options:Object(l.a)(i.options)}}else a.state={questionName:"",type:"SINGLE",options:[]};return a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){}},{key:"randerOptions",value:function(e){var t=this;return e.map((function(e,n){return i.a.createElement("div",{key:n,className:"section"},i.a.createElement("span",null,"Option ",n+1),i.a.createElement(O.a,{onClick:t.onOptionDeletion.bind(t,n)}),i.a.createElement(f.a,{onChange:t.onOptionChange.bind(t,n),value:e.name,placeholder:"Optioin"}))}))}},{key:"render",value:function(){var e=this.randerOptions(this.state.options),t=this.checkState();return i.a.createElement("div",{className:"question_form"},i.a.createElement("span",null,"Question Name:"),i.a.createElement(f.a,{onChange:this.onNameChange,value:this.state.questionName,placeholder:"Question Name"}),i.a.createElement("div",{className:"section"},i.a.createElement(N.a.Group,{onChange:this.onTypeChange,value:this.state.type},i.a.createElement(N.a,{value:"MULTIPLE"},"Multiple Choice"),i.a.createElement(N.a,{value:"SINGLE"},"Single Choice"))),e,i.a.createElement(y.a,{onClick:this.onAddOption,type:"primary"},"Add a New Option"),i.a.createElement("div",{className:"footer"},i.a.createElement(y.a,{onClick:this.props.onCancel},"Cancel"),i.a.createElement(y.a,{onClick:this.onConfirm,type:"primary",disabled:!t},"Confirm")))}}]),n}(i.a.Component),k=n(199),M=n(200),q=n(201),S=n(116),j=function(e){if(e.ok)return e;var t=new Error(e.statusText);return t.response=e,e.json().then((function(e){t.error=e})),Promise.reject(t)},D=E.a.Title,T=E.a.Paragraph;function I(e){return e<h()().endOf("day")||e>h()().add(14,"days")}var w=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).openEditMod=function(e){a.setState({editMod:!0,currentEditId:e})},a.closeEditMod=function(){a.setState({editMod:!1})},a.onQuestionConfirm=function(e){if(a.state.currentEditId>=0){var t=a.state.questions;t[a.state.currentEditId]=e,a.setState({questions:t,currentEditId:-1})}else{var n=[].concat(Object(l.a)(a.state.questions),[e]);a.setState({questions:n})}a.closeEditMod()},a.onQuestionDeletion=function(e){var t=Object(l.a)(a.state.questions);t.splice(e,1),a.setState({questions:t})},a.renderQuestions=function(e){return e.map((function(e,t){var n=e.options.map((function(e,t){return i.a.createElement("div",{className:"option",key:t+e.name},"option ",t+1,":",e.name)}));return i.a.createElement("div",{key:t+e.name},i.a.createElement("div",{className:"question_title"},"Question ",t+1,":",i.a.createElement("span",{className:"blue"},"(","MULTIPLE"===e.type?"Multiple choice":"Single choice",")"),e.name,i.a.createElement(O.a,{onClick:a.onQuestionDeletion.bind(Object(u.a)(a),t)}),i.a.createElement(k.a,{onClick:a.openEditMod.bind(Object(u.a)(a),t)})),i.a.createElement("div",null,n))}))},a.onTitleChange=function(e){var t=e.target.value;a.setState({title:t})},a.check=function(){return!!a.state.title.trim()&&a.state.questions.length>0},a.onCreate=function(){for(var e=a.state.questions,t=0;t<e.length;t++){e[t].index=t;for(var n=0;n<e[t].options.length;n++)e[t].options[n].index=n}var i,o={title:a.state.title.trim(),questions:e,endTime:a.state.endDate.format("YYYY-MM-D hh:mm:ss")};(i=o,Object(S.a)("api/create",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(i)}).then(j).then((function(e){return e.text()}),(function(e){return e}))).then((function(e){console.log("new poll ID: "+e),window.location.replace("/admin/"+e)}),(function(e){window.location.replace("/error/")}))},a.onDateChange=function(e){a.setState({endDate:e})},a.setXdaysLater=function(e){a.setState({endDate:h()().endOf("day").add(e,"days")})},a.state={title:"",editMod:!1,currentEditId:-1,questions:[],endDate:h()().endOf("day")},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.renderQuestions(this.state.questions);return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"main"},i.a.createElement(E.a,null,i.a.createElement(D,null,"EasyPoll"),i.a.createElement(T,null,"This is an online polling application. Yout can start a poll among your friends within 1 min.",i.a.createElement("ul",null,i.a.createElement("li",null,"Easy to setup"),i.a.createElement("li",null,"No need to sign in"),i.a.createElement("li",null,"Multiple question types")))),i.a.createElement(D,null,"Start a New Poll"),i.a.createElement("span",{className:"small-title"},"Title:"),i.a.createElement(f.a,{value:this.state.title,onChange:this.onTitleChange,placeholder:"Title of your poll"}),i.a.createElement("div",{style:{marginTop:"2rem"}}),i.a.createElement("span",{className:"small-title"},"Valid Time:"),i.a.createElement("div",{className:"date"},i.a.createElement("span",null,"From today to "),i.a.createElement(v.a,{format:"YYYY-MM-DD",disabledDate:I,value:this.state.endDate,onChange:this.onDateChange}),i.a.createElement(y.a,{className:"date-btn",onClick:this.setXdaysLater.bind(this,1)},"+1day"),i.a.createElement(y.a,{className:"date-btn",onClick:this.setXdaysLater.bind(this,3)},"+3days"),i.a.createElement(y.a,{className:"date-btn",onClick:this.setXdaysLater.bind(this,7)},"+7days"),i.a.createElement("div",{className:"date-text"},"This poll expires at ",i.a.createElement("span",{className:"blue"},this.state.endDate.format("MMMM Do"))," 23:59")),i.a.createElement("div",{style:{marginTop:"2rem"}}),i.a.createElement("span",{className:"small-title"},"Questions:"),i.a.createElement("div",{className:"questions"},e),i.a.createElement(y.a,{type:"primary",onClick:this.openEditMod.bind(this,-1)},i.a.createElement(M.a,null),"Add a new question"),"\xa0\xa0\xa0\xa0",i.a.createElement(y.a,{type:"primary",disabled:!this.check(),onClick:this.onCreate},i.a.createElement(q.a,null),"Create it!")),i.a.createElement(C.a,{title:"New Question",visible:this.state.editMod,footer:null,onCancel:this.closeEditMod,maskClosable:!1,destroyOnClose:!0},i.a.createElement(g,{onCancel:this.closeEditMod,onConfirm:this.onQuestionConfirm,questions:this.state.questions,editIndex:this.state.currentEditId})))}}]),n}(i.a.Component);n(191);s.a.render(i.a.createElement(w,null),document.getElementById("root"))}},[[128,1,2]]]);
//# sourceMappingURL=main.70176add.chunk.js.map