(this.webpackJsonppoll=this.webpackJsonppoll||[]).push([[0],{128:function(e,t,a){e.exports=a(192)},133:function(e,t,a){},192:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(8),s=a.n(o),l=(a(133),a(36)),r=a(66),c=a(67),u=a(56),m=a(75),d=a(78),p=a(9),h=a.n(p),E=a(194),f=a(197),v=a(193),y=a(35),C=a(195),b=a(112),N=a(196),O=a(198),g=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;if(Object(r.a)(this,a),(n=t.call(this,e)).onNameChange=function(e){var t=e.target.value;n.setState({questionName:t})},n.onAddOption=function(){n.setState({options:[].concat(Object(l.a)(n.state.options),[{name:""}])})},n.onTypeChange=function(e){n.setState({type:e.target.value})},n.onOptionChange=function(e,t){var a=t.target.value,i=Object(l.a)(n.state.options);i[e].name=a,n.setState({options:i})},n.onOptionDeletion=function(e){var t=Object(l.a)(n.state.options);t.splice(e,1),n.setState({options:t})},n.onConfirm=function(){var e={name:n.state.questionName,options:n.state.options,type:n.state.type};n.props.onConfirm(e)},n.checkState=function(){var e,t=!!n.state.questionName.trim(),a=!1,i=!1,o=Object(b.a)(n.state.options);try{for(o.s();!(e=o.n()).done;){var s=e.value;a=!0,""===s.name.trim()&&(i=!0)}}catch(l){o.e(l)}finally{o.f()}return t&&a&&!i},e.editIndex>=0){var i=e.questions[e.editIndex];n.state={questionName:i.name,type:i.type,options:Object(l.a)(i.options)}}else n.state={questionName:"",type:"SINGLE",options:[]};return n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){}},{key:"randerOptions",value:function(e){var t=this;return e.map((function(e,a){return i.a.createElement("div",{key:a,className:"section"},i.a.createElement("span",null,"Option ",a+1),i.a.createElement(O.a,{onClick:t.onOptionDeletion.bind(t,a)}),i.a.createElement(f.a,{onChange:t.onOptionChange.bind(t,a),value:e.name,placeholder:"Optioin"}))}))}},{key:"render",value:function(){var e=this.randerOptions(this.state.options),t=this.checkState();return i.a.createElement("div",{className:"question_form"},i.a.createElement("span",null,"Question Name:"),i.a.createElement(f.a,{onChange:this.onNameChange,value:this.state.questionName,placeholder:"Question Name"}),i.a.createElement("div",{className:"section"},i.a.createElement(N.a.Group,{onChange:this.onTypeChange,value:this.state.type},i.a.createElement(N.a,{value:"MULTIPLE"},"Multiple Choice"),i.a.createElement(N.a,{value:"SINGLE"},"Single Choice"))),e,i.a.createElement(y.a,{onClick:this.onAddOption,type:"primary"},"Add a New Option"),i.a.createElement("div",{className:"footer"},i.a.createElement(y.a,{onClick:this.props.onCancel},"Cancel"),i.a.createElement(y.a,{onClick:this.onConfirm,type:"primary",disabled:!t},"Confirm")))}}]),a}(i.a.Component),k=a(199),M=a(200),q=a(201),S=a(116),j=function(e){if(e.ok)return e;var t=new Error(e.statusText);return t.response=e,e.json().then((function(e){t.error=e})),Promise.reject(t)},D=E.a.Title,T=E.a.Paragraph;function I(e){return e<h()().endOf("day")||e>h()().add(14,"days")}var w=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).openEditMod=function(e){n.setState({editMod:!0,currentEditId:e})},n.closeEditMod=function(){n.setState({editMod:!1})},n.onQuestionConfirm=function(e){if(n.state.currentEditId>=0){var t=n.state.questions;t[n.state.currentEditId]=e,n.setState({questions:t,currentEditId:-1})}else{var a=[].concat(Object(l.a)(n.state.questions),[e]);n.setState({questions:a})}n.closeEditMod()},n.onQuestionDeletion=function(e){var t=Object(l.a)(n.state.questions);t.splice(e,1),n.setState({questions:t})},n.renderQuestions=function(e){return e.map((function(e,t){var a=e.options.map((function(e,t){return i.a.createElement("div",{className:"option",key:t+e.name},"option ",t+1,":",e.name)}));return i.a.createElement("div",{key:t+e.name},i.a.createElement("div",{className:"question_title"},"Question ",t+1,":",i.a.createElement("span",{className:"blue"},"(","MULTIPLE"===e.type?"Multiple choice":"Single choice",")"),e.name,i.a.createElement(O.a,{onClick:n.onQuestionDeletion.bind(Object(u.a)(n),t)}),i.a.createElement(k.a,{onClick:n.openEditMod.bind(Object(u.a)(n),t)})),i.a.createElement("div",null,a))}))},n.onTitleChange=function(e){var t=e.target.value;n.setState({title:t})},n.check=function(){return!!n.state.title.trim()&&n.state.questions.length>0},n.onCreate=function(){for(var e=n.state.questions,t=0;t<e.length;t++){e[t].index=t;for(var a=0;a<e[t].options.length;a++)e[t].options[a].index=a}var i,o={title:n.state.title.trim(),questions:e,endTime:n.state.endDate.format("YYYY-MM-D hh:mm:ss")};(i=o,Object(S.a)("http://easypoll.us-east-2.elasticbeanstalk.com/api/create",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(i)}).then(j).then((function(e){return e.text()}),(function(e){return e}))).then((function(e){console.log("new poll ID: "+e),window.location.replace("/admin/"+e)}),(function(e){window.location.replace("/error/")}))},n.onDateChange=function(e){n.setState({endDate:e})},n.setXdaysLater=function(e){n.setState({endDate:h()().endOf("day").add(e,"days")})},n.state={title:"",editMod:!1,currentEditId:-1,questions:[],endDate:h()().endOf("day")},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.renderQuestions(this.state.questions);return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"main"},i.a.createElement(E.a,null,i.a.createElement(D,null,"EasyPoll"),i.a.createElement(T,null,"This is an online polling application. Yout can start a poll among your friends within 1 min.",i.a.createElement("ul",null,i.a.createElement("li",null,"Easy to setup"),i.a.createElement("li",null,"No need to sign in"),i.a.createElement("li",null,"Multiple question types")))),i.a.createElement(D,null,"Start a New Poll"),i.a.createElement("span",{className:"small-title"},"Title:"),i.a.createElement(f.a,{value:this.state.title,onChange:this.onTitleChange,placeholder:"Title of your poll"}),i.a.createElement("div",{style:{marginTop:"2rem"}}),i.a.createElement("span",{className:"small-title"},"Valid Time:"),i.a.createElement("div",{className:"date"},i.a.createElement("span",null,"From today to "),i.a.createElement(v.a,{format:"YYYY-MM-DD",disabledDate:I,value:this.state.endDate,onChange:this.onDateChange}),i.a.createElement(y.a,{className:"date-btn",onClick:this.setXdaysLater.bind(this,1)},"+1day"),i.a.createElement(y.a,{className:"date-btn",onClick:this.setXdaysLater.bind(this,3)},"+3days"),i.a.createElement(y.a,{className:"date-btn",onClick:this.setXdaysLater.bind(this,7)},"+7days"),i.a.createElement("div",{className:"date-text"},"This poll expires at ",i.a.createElement("span",{className:"blue"},this.state.endDate.format("MMMM Do"))," 23:59")),i.a.createElement("div",{style:{marginTop:"2rem"}}),i.a.createElement("span",{className:"small-title"},"Questions:"),i.a.createElement("div",{className:"questions"},e),i.a.createElement(y.a,{type:"primary",onClick:this.openEditMod.bind(this,-1)},i.a.createElement(M.a,null),"Add a new question"),"\xa0\xa0\xa0\xa0",i.a.createElement(y.a,{type:"primary",disabled:!this.check(),onClick:this.onCreate},i.a.createElement(q.a,null),"Create it!")),i.a.createElement(C.a,{title:"New Question",visible:this.state.editMod,footer:null,onCancel:this.closeEditMod,maskClosable:!1,destroyOnClose:!0},i.a.createElement(g,{onCancel:this.closeEditMod,onConfirm:this.onQuestionConfirm,questions:this.state.questions,editIndex:this.state.currentEditId})))}}]),a}(i.a.Component);a(191);s.a.render(i.a.createElement(w,null),document.getElementById("root")),document.title="EasyPoll"}},[[128,1,2]]]);
//# sourceMappingURL=main.277c4fb7.chunk.js.map