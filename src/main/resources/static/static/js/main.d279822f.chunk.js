(this.webpackJsonppoll=this.webpackJsonppoll||[]).push([[0],{105:function(e,t,n){e.exports=n(169)},110:function(e,t,n){},169:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(4),s=n.n(i),r=(n(110),n(23)),l=n(47),c=n(48),u=n(38),m=n(51),d=n(52),p=n(170),h=n(22),f=n(171),E=n(86),v=n(172),C=n(174),y=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var a;if(Object(l.a)(this,n),(a=t.call(this,e)).onNameChange=function(e){var t=e.target.value;a.setState({questionName:t})},a.onAddOption=function(){a.setState({options:[].concat(Object(r.a)(a.state.options),[{name:""}])})},a.onTypeChange=function(e){a.setState({type:e.target.value})},a.onOptionChange=function(e,t){var n=t.target.value,o=Object(r.a)(a.state.options);o[e].name=n,a.setState({options:o})},a.onOptionDeletion=function(e){var t=Object(r.a)(a.state.options);t.splice(e,1),a.setState({options:t})},a.onConfirm=function(){var e={questionName:a.state.questionName,options:a.state.options,type:a.state.type};a.props.onConfirm(e)},a.checkState=function(){var e,t=!!a.state.questionName.trim(),n=!1,o=!1,i=Object(E.a)(a.state.options);try{for(i.s();!(e=i.n()).done;){var s=e.value;n=!0,""===s.name.trim()&&(o=!0)}}catch(r){i.e(r)}finally{i.f()}return t&&n&&!o},e.editIndex>=0){var o=e.questions[e.editIndex];a.state={questionName:o.questionName,type:o.type,options:Object(r.a)(o.options)}}else a.state={questionName:"",type:"single",options:[]};return a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){}},{key:"randerOptions",value:function(e){var t=this;return e.map((function(e,n){return o.a.createElement("div",{key:n,className:"section"},o.a.createElement("span",null,"Option ",n+1),o.a.createElement(C.a,{onClick:t.onOptionDeletion.bind(t,n)}),o.a.createElement(p.a,{onChange:t.onOptionChange.bind(t,n),value:e.name,placeholder:"Optioin"}))}))}},{key:"render",value:function(){var e=this.randerOptions(this.state.options),t=this.checkState();return o.a.createElement("div",{className:"question_form"},o.a.createElement("span",null,"Question Name:"),o.a.createElement(p.a,{onChange:this.onNameChange,value:this.state.questionName,placeholder:"Question Name"}),o.a.createElement("div",{className:"section"},o.a.createElement(v.a.Group,{onChange:this.onTypeChange,value:this.state.type},o.a.createElement(v.a,{value:"multiple"},"Multiple Choice"),o.a.createElement(v.a,{value:"single"},"Single Choice"))),e,o.a.createElement(h.a,{onClick:this.onAddOption,type:"primary"},"Add a New Option"),o.a.createElement("div",{className:"footer"},o.a.createElement(h.a,{onClick:this.props.onCancel},"Cancel"),o.a.createElement(h.a,{onClick:this.onConfirm,type:"primary",disabled:!t},"Confirm")))}}]),n}(o.a.Component),O=n(175),b=n(176),q=n(177),N=n(92),g=function(e){if(e.ok)return e;var t=new Error(e.statusText);return t.response=e,e.json().then((function(e){t.error=e})),Promise.reject(t)},k=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).openEditMod=function(e){a.setState({editMod:!0,currentEditId:e})},a.closeEditMod=function(){a.setState({editMod:!1})},a.onQuestionConfirm=function(e){if(a.state.currentEditId>=0){var t=a.state.questions;t[a.state.currentEditId]=e,a.setState({questions:t,currentEditId:-1})}else{var n=[].concat(Object(r.a)(a.state.questions),[e]);a.setState({questions:n})}a.closeEditMod()},a.onQuestionDeletion=function(e){var t=Object(r.a)(a.state.questions);t.splice(e,1),a.setState({questions:t})},a.renderQuestions=function(e){return e.map((function(e,t){var n=e.options.map((function(e,t){return o.a.createElement("div",{className:"option",key:e.name},"option ",t+1,":",e.name)}));return o.a.createElement("div",{key:e.questionName},o.a.createElement("div",{className:"question_title"},"Question ",t+1,":",o.a.createElement("span",{className:"blue"},"(","multiple"===e.type?"Multiple choice":"Single choice",")"),e.questionName,o.a.createElement(C.a,{onClick:a.onQuestionDeletion.bind(Object(u.a)(a),t)}),o.a.createElement(O.a,{onClick:a.openEditMod.bind(Object(u.a)(a),t)})),o.a.createElement("div",null,n))}))},a.onTitleChange=function(e){var t=e.target.value;a.setState({title:t})},a.check=function(){return!!a.state.title.trim()&&a.state.questions.length>0},a.onCreate=function(){var e,t={title:a.state.title.trim(),questions:a.state.questions};(e=t,Object(N.a)("api/create",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)}).then(g)).then((function(e){console.log(e)}),(function(e){console.log(e)}))},a.state={title:"",editMod:!1,currentEditId:-1,questions:[]},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.renderQuestions(this.state.questions);return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"main"},o.a.createElement("h1",null,"Start a New Poll"),o.a.createElement("span",null,"Title:"),o.a.createElement(p.a,{value:this.state.title,onChange:this.onTitleChange,placeholder:"Title"}),o.a.createElement("div",{className:"questions"},e),o.a.createElement(h.a,{type:"primary",onClick:this.openEditMod.bind(this,-1)},o.a.createElement(b.a,null),"Add a new question"),"\xa0\xa0\xa0\xa0",o.a.createElement(h.a,{type:"primary",disabled:!this.check(),onClick:this.onCreate},o.a.createElement(q.a,null),"Create it!")),o.a.createElement(f.a,{title:"New Question",visible:this.state.editMod,footer:null,onCancel:this.closeEditMod,maskClosable:!1,destroyOnClose:!0},o.a.createElement(y,{onCancel:this.closeEditMod,onConfirm:this.onQuestionConfirm,questions:this.state.questions,editIndex:this.state.currentEditId})))}}]),n}(o.a.Component);n(168);s.a.render(o.a.createElement(k,null),document.getElementById("root"))}},[[105,1,2]]]);
//# sourceMappingURL=main.d279822f.chunk.js.map